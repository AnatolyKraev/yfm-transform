# YFM Style Guide

Статьи на сайте [Яндекс.Облако](cloud.yandex.ru/docs) написаны на Markdown —
упрощенном языке разметки, который легко использовать и изучать. Благодаря
своей простоте он быстро становится отраслевым стандартом. Так как документация
хранится в репозитории GitHub, для нее можно использовать расширенный набор
Markdown под названием GitHub Flavored Markdown (GFM).

Для удобоства написания документации мы расширили стандартный формат,
который позволяет работать со вставками, табами и другими элементами.

## Содержание

- [Базовые сведения о Markdown](#base)
    - [Заголовки](#headers)
    - [Начертания](#tracings)
    - [Списки](#lists)
        - [Неупорядоченный список](#unordered_list)
        - [Упорядоченный список](#ordered_list)
    - [Таблицы](#tabels)
    - [Ссылки](#links)
    - [Вставка кода](#code)
    - [Изображения](#images)
        - [Прямая вставка](#direct_insert)
        - [Вставка через ссылку](#link_insert)
- [Расширенные возможности Markdown (YFM)](#yfm)
    - [Заметки](#notes)
        - [Примечание](#comments)
        - [Предупреждение](#warnings)
        - [Совет](#advice)
        - [Важно](#important)
    - [Вставки (инклуды)](#includes)
        - [Вставка файла целиком](#file_includes)
        - [Вставка файла целиком (без заголовка)](#wo_title_includes)
    - [Табы](#tabs)
    - [Метаданные](#meta)
    - [Оглавление раздела](#contents)
    - [Подстановки](#substitudes)
    - [Условные операторы](#conditions)
    - [Разводящая страница](#page)

## Базовые сведения о Markdown <a name="base"></a>
### Заголовки <a name="headers"></a>

Чтобы создать заголовок, используйте знак (#), например:

```markdown
# Заголовок h1
## Заголовок h2
### Заголовок h3
#### Заголовок h4
```

Заголовок страницы пишем h1 заголовком. Далее идёт раздел - h2. Потом уже
по уровням вложенности. Важно! Нельзя пропускать вложенность загловков.

### Начертания <a name="tracings"></a>

Чтобы задать для текста **полужирное начертание**, заключите его в двойные
звездочки:

```markdown
Этот текст **жирный**.
```

Чтобы задать для текста _курсивное начертание_, заключите его в знаки подчеркивания:

```markdown
Этот текст _наклонный_.
```

Чтобы задать для текста _**полужирное и курсивное**_ начертание, заключите
его одновременно в двойные звездочки и знаки подчеркивания:

```markdown
Этот текст _**жирный и наклонный**_.
Этот текст **_жирный и наклонный_**.
```

### Списки <a name="lists"></a>

#### Неупорядоченный список <a name="unordered_list"></a>

Неупорядоченный (маркированный) список можно отформатировать с помощью
звездочек (*), дефисов (-) или знаков плюс (+). Например, следующая разметка Markdown:

```markdown
- Элемент 1
- Элемент 2
- Элемент 3
```

будет отображаться как:

- Элемент 1
- Элемент 2
- Элемент 3

Чтобы вложить один список в другой, добавьте отступ для элементов дочернего
списка. Например, следующая разметка Markdown:

```markdown
- Элемент 1
  - Элемент A
  - Элемент B
- Элемент 2
```

будет отображаться как:

- Элемент 1
  - Элемент A
  - Элемент B
- Элемент 2

#### Упорядоченный список <a name="ordered_list"></a>

Упорядоченный (ступенчатый) список можно отформатировать с помощью
соответствующих цифр. Например, следующая разметка Markdown:

```
1. Первый пункт
1. Второй пункт
1. Третий пункт
```

будет отображаться как:

1. Первый пункт
2. Второй пункт
3. Третий пункт

Чтобы вложить один список в другой, добавьте отступ для элементов
дочернего списка. Например, следующая разметка Markdown:

```
1. Первый пункт
    1. Вложенный пункт
    1. Вложенный пункт
1. Второй пункт
```

будет отображаться как:

1. Первый пункт
    1.1. Вложенный пункт
    1.2. Вложенный пункт
2. Второй пункт


### Таблицы <a name="tabels"></a>

Таблицы не входят в основную спецификацию Markdown, но их поддерживает GFM.
Создавать таблицы можно с помощью символов вертикальной черты (|) и дефиса (-).
Дефисы позволяют создавать для каждого столбца заголовок. Вертикальные черты
разделяют столбцы. Чтобы таблица правильно отображалась, включите перед
ней пустую строку.

Например, следующая разметка Markdown:

```markdown
Колонка по левому краю | Колонка по правому краю | Колонка по центру
:--- | ---: | :---:
Текст | Текст | Текст
```

будет отображаться как:

Колонка по левому краю | Колонка по правому краю | Колонка по центру
:--- | ---: | :---:
Текст | Текст | Текст

### Ссылки <a name="links"></a>

Синтаксис Markdown для встроенной ссылки состоит из части `[текст ссылки]`,
представляющей текст гиперссылки, и части `(имя_файла.md)` — URL-адреса или
имени файла, на который дается ссылка:

 `[link text](file-name.md)`

В нашем расширении GFM мы добавили возможность вставлять ссылку без указания
текста ссылки. Например:

```markdown
[{#T}](file-name.md)
```

В этом случае ссылка подставится автоматически из заголовка файла указанного
в ссылке. Это упрощает переименовывание документов.

### Вставка кода <a name="code"></a>

Markdown поддерживает как встраивание фрагментов кода в предложение,
так и их размещение между предложениями в виде отдельных огражденных блоков.

    ```js
    let a = 10;
    ```

Такая вставка приобразуется в код с подсветкой.

```js
let a = 10;
```

### Изображения <a name="images"></a>

Есть общее правило - все изображения необходимо положить в папку `_assets`. Она
может находиться на всех уровнях документации. Добавить изображение в статью
так:

#### Прямая вставка <a name="direct_insert"></a>

```markdown
![alt text](_assets/image.png "Текст для подсказки при ховере")
```

#### Вставка через ссылку <a name="link_insert"></a>

```markdown
![alt text][image]
[image]: _assets/image.png "Текст для подсказки при ховере"
```

Такой способ может быть удобен, когда нужно вставить одно изображение
несколько раз.

## Расширенные возможности Markdown (YFM) <a name="yfm"></a>

### Заметки <a name="notes"></a>

Есть пять типов блоков заметок, которые позволяют привлечь внимание к
определенному содержимому. В целом не следует часто использовать блоки заметок,
так как они могут отвлекать пользователя от основного содержимого. Хотя эти
элементы также поддерживают блоки кода, изображения, списки и ссылки, лучше
не перегружать их, делая простыми и понятными.

#### Примечание <a name="comments"></a>
```markdown
{% note info %}

Это примечание.

{% endnote %}
```

#### Предупреждение <a name="warnings"></a>
```markdown
{% note alert %}

Это предупреждение.

{% endnote %}
```
#### Совет <a name="advice"></a>
```markdown
{% note tip %}

Это совет.

{% endnote %}
```
#### Важно <a name="important"></a>
```markdown
{% note important %}

Это важная информация.

{% endnote %}
```

#### Ошибка <a name="error></a>
```markdown
{% note error %}

Это важная информация.

{% endnote %}
```

#### Кастомизированный заголовок <a name="error></a>
Любая заметка может иметь кастомизированный заголовок.

```markdown
{% note info "Custom title" %}

Это важная информация.

{% endnote %}
```

Можно скрыть заголовок вообще:

```markdown
{% note info "" %}

Это важная информация.

{% endnote %}
```

### Вставки (инклуды) <a name="includes"></a>

При написании документации удобно часть контента выделять в отдельные файлы и
использовать их в нескольких местах.

Все файлы, которые будет необходимо вставить обязаны лежать в папке
```_includes```. Эта папка может быть как на корневом уровне документаци,
так и в каждом разделе.

#### Вставка файла целиком <a name="file_includes"></a>

```{% include [Описание](_includes/file.md) %}```

В поле для описания рекомендуется вставлять некий комментарий про что
этот файл, для более удобного отображения на Github.

#### Вставка файла целиком (без заголовка) <a name="wo_title_includes"></a>

```{% include notitle [description](file.md) %}```

Здесь всё работает аналогично предыдущему абзацу с тем отличаем, что
если в файле, который вставляется есть заголовок, то он будет вырезан.

### Табы <a name="tabs"></a>

Очень удобно разделять схожий контент табами. Пример реализации:
```markdown
{% list tabs %}

- Название таба1

  Контент таба1.
  Можно несколько строк.

- Название таба2

  Контент таба2.

{% endlist %}
```

## Метаданные <a name="meta"></a>

На каждой странице (кроме файлов в папках ```_includes```) в начале файла необходимо
добавить метаданные в формате yaml. Обязательное поле - title.

```

---
title: Заголовок
description: Описание
---
```

Также сюда стоит добавлять даннаые для SEO.

## Оглавление раздела <a name="contents"></a>

Чтобы на сайте Облака мы могли нарисовать правильную навигацию у кажого
раздела существует оглавлением. Формируется оно в виде отдельного файла
```toc.yaml```.

```yaml
- title: Yandex Cloud Marketplace
  href: index.md
  items:
    - name: Тестовый топикхед
      items:
        - name: Создание виртуальной машины
          href: create.md
    - name: Первичная настройка программного обеспечения
      href: setup.md
    - name: Работа с виртуальной машиной
      href: operate.md
    - name: Справочник API
      include:
        repo: docs-api
        path: ru/compute/toc.yaml
```

Если это папка, то у неё появляются вложенные элементы ```items```. Уровень
вложенности может быть любым, но стоит исходить из разумных ограничений.

Можно включить в оглавление другое оглавление. Для этого в элементе нужно указать
поле `include` с полями `repo` (имя репозитория) и `path` (путь до `toc.yaml`).

## Подстановки <a name="substitudes"></a>

В тексте документации можно использовать сторонние данные. Подстановки сторонних данных 
обозначается двойными фигурными скобками:

```
{{user.name}}
```

## Условные операторы <a name="conditions"></a>

Включаемый в документацию текст может зависеть от сторонних данных. Условные операторы создают 
логику и поток управления для шаблонов. Они обозначены фигурными скобками и знаками процента: {% и %}.

```
{% if user %} Привет {{ user.name }}! {% else %} Мы знакомы? {% endif %}
```

Доступны условные операторы `if`, `else if`, `else`. В них можно использовать различные операторы сравнения: 
==, !=, <, >, <=, >=.

Условные операторы могут содержать как простой текст, так и блоки YFM разметки.

## Разводящая страница <a name="page"></a>

При переходе пользователя на раздел необходимо сделать разводящую. Это по-сути
набор ссылок на базовые позразделы. Добавляем файл `index.yaml`, в котором указываем
заголовок, описание и ссылку.

Пример файла:

```yaml
# Заголовок и описание
title: "Биллинг в облаке"
description: "Биллинг — это сервис в составе Яндекс.Облака, который позволяет получать информацию о количестве потребленных ресурсов, проверять расходы денежных средств и оплачивать ресурсы. В Яндекс.Облаке вы платите только за потребленные ресурсы и только за время их фактического использования."
# Мета-информация title, description, keywords и т.п. (title вкладки и разные SEO-теги)
meta:
  title: "Биллинг в облаке"
# Блок с ссылками
links:
- title: "Начало работы"
  description: "Как создать свою первую виртуальную машину"
  href: "#"
- title: "Базовые операции"
  description: "Пошаговые инструкции по операциям настройки, подключения, изменения"
  href: "#"
```
